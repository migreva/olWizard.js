/*! olWizard.js - v0.0.1 - 2015-03-30 */!function(a){"use strict";a.fn.olWizard=function(b){if(0===this.length)throw"DOM Element not found.";var c=this;return this.opts=a.extend({title:".olwiz-title",content:".olwiz-content",next:".olwiz-next",prev:".olwiz-prev",passed:"olwiz-passed",failed:"olwiz-failed",active:"olwiz-active",validate:{}},b),this._done=!1,this.lilwiz={},this.find(this.opts.content).hide(),this.gotoStep=function(a){var b=this.getStep(a);if("undefined"!=typeof b)return b.isFirst()?b.find(this.opts.prev).prop("disabled",!0):b.find(this.opts.prev).prop("disabled",!1),this.children("li").removeClass(c.opts.active),b.addClass(c.opts.active),b.find(this.opts.content).show(),this._done||b.trigger("olwizStep",b),this},this.eachStep=function(b){for(var c=0,d=this.lilwiz.length;d>c;c++){var e=this.lilwiz[c];a.proxy(b,e,c)}},this.getStep=function(b){this.eachStep(function(a){if(b==this.getStepNumber()){if(b==this.getStepNumber())return this;if(b==this.opts.name)return this}});var d,e=this.children("li");return e.each(function(e){var f=e+1;return b==f?(c.lilwiz[f]=a(this).lilWizard(c),void(d=c.lilwiz[f])):b==a(this).attr("name")?(c.lilwiz[f]=a(this).lilWizard(c),void(d=c.lilwiz[f])):void 0}),d},this.getActiveStep=function(){for(var a in this.lilwiz){var b=this.lilwiz[a];if(b.hasClass(this.opts.active))return b}},this.next=function(a){if("undefined"==typeof a)var a=this.getActiveStep();if(a&&!a._disable_actions&&a.hasClass(c.opts.active)){if(!this._done){var b=a._validate();if(b!==!0)return;if(a.isLast())return this._done=!0,a.passed(!1),a.removeClass(this.opts.active),void a.trigger("olwizDone")}return this.gotoStep(a.getStepNumber()+1)}},this.prev=function(a){if("undefined"==typeof a)var a=this.getActiveStep();if(a&&!a._disable_actions&&a.hasClass(c.opts.active))return this.gotoStep(a.index())},this},a.fn.lilWizard=function(b,c){function d(a){a.on("click",a.olwiz.opts.next,function(){a.olwiz.next(e)}),a.on("click",a.olwiz.opts.prev,function(){a.olwiz.prev(e)}),a.on("click",a.olwiz.opts.title,function(){return a.hasClass(a.olwiz.opts.passed)||a.hasClass(a.olwiz.opts.failed)?a.olwiz.gotoStep(e.getStepNumber()):void 0})}var e=this;return this.olwiz=b,this.opts=a.extend({name:this.attr("name")},c),this._data={},this._disable_actions=!1,d(this),this.getStepNumber=function(){return this.index()+1},this.getTitle=function(){return this.find(this.find(this.olwiz.opts.title))},this.getContent=function(){return this.find(this.find(this.olwiz.opts.content))},this.isFirst=function(){return this[0]===this.olwiz.children("li").first()[0]},this.isLast=function(){return this[0]===this.olwiz.children("li").last()[0]},this.data=function(a){return"undefined"==typeof a?this._data:void(this._data=a)},this.disable_actions=function(){a(this).find(this.olwiz.opts.prev).prop("disabled",!0),a(this).find(this.olwiz.opts.next).prop("disabled",!0),this._disable_actions=!0},this.enable_actions=function(){this.isFirst()||this.find(this.olwiz.opts.prev).prop("disabled",!1),this.find(this.olwiz.opts.next).prop("disabled",!1),this._disable_actions=!1},this.passed=function(a){return this.removeClass(this.olwiz.opts.failed).addClass(this.olwiz.opts.passed),this.enable_actions(),this.trigger("olwizStepPassed",this),"undefined"==typeof a&&(a=!0),a&&this.olwiz.gotoStep(this.getStepNumber()+1),this},this.failed=function(a){return"undefined"!=typeof a&&this.data(a),this.removeClass(this.olwiz.opts.passed).addClass(this.olwiz.opts.failed),this.enable_actions(),this.trigger("olwizStepFailed",this),this},this.validate=function(a){return this.validator=a,this},this._validate=function(){var a=(this.getStepNumber(),!0);return this.disable_actions(),"undefined"!=typeof this.validator&&(a=this.validator()),a===!0?(this.passed(!1),!0):a===!1?(this.failed(),!1):void 0},this}}(jQuery);